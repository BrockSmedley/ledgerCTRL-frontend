{% extends 'base.jinja' %}
{% block title %}{{ title }}{% endblock %}
{% block header %}
  
{% endblock %}

{% block content %}
<div class="mdl-grid">
  <div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--8-col login-box">
    <div class="mdl-card__title">
      <h2 class="mdl-card__title-text">Your files</h2>
    </div>
    <ul class="demo-list-item mdl-list">
      {% for i in items %}
      <li class="mdl-list__item">
        <span class="mdl-list__item-primary-content">
          <i class="material-icons" style="margin-right: 12px;">cloud_download</i>
          <a href="/item/{{ i['itemhash'] }}">{{ i['filename'] }}</a>
        </span>
      </li>
      {% endfor %}
    </ul>
  </div>
  
  <div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--4-col login-box">
    <div class="mdl-card__title">
      <h2 class="mdl-card__title-text">Upload File</h2>
    </div>
    {% if current_user.is_authenticated %}
    <form method="POST" enctype="multipart/form-data" action="/inventory">
      <input type="file" id="upfile" name="upfile" required>
      <input type="hidden" id="userIndex" name="userIndex" value="{{ uid }}">
      <input type="hidden" id="userPass" name="userPass" value="{{ upass }}">
      <input type="hidden" id="inventoryItem" name="inventoryItem" value='{"name": "test", "owner": "{{ current_user.email }}" }'>
      <button class="mdl-button mdl-button--colored mdl-md block" type="submit">Upload</button>
    </form>
    {% else %}
    <div style="text-align: center">
      <a href="/login">Log in</a> or <a href="/register">register</a> to upload files!
    </div>
    {% endif %}
</div>
<script>
  function processURL() {
    var url = '/file/' + document.getElementById("id").value;
    location.href = url;
    return false;
  }
</script>

{% endblock %}